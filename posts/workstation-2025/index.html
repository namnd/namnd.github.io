<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Workstation 2025 - namnd ☕</title><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:url" content="/posts/workstation-2025/"><meta property="og:site_name" content="namnd ☕"><meta property="og:title" content="Workstation 2025"><meta property="og:description" content="It’s been almost 2 years since my last workstation setup post. At a high level, it hasn’t changed much, but it’s been a while, so I figured it’s a good time to share some updates."><meta property="og:locale" content="en_au"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-01T10:07:54+10:00"><meta property="article:modified_time" content="2025-01-01T10:07:54+10:00"><meta property="article:tag" content="Nix"><meta property="article:tag" content="Nixos"><meta property="article:tag" content="Vm"><meta property="article:tag" content="Utm"><meta property="article:tag" content="Ghostty"><meta property="article:tag" content="Lemonade"><meta name=twitter:card content="summary"><meta name=twitter:title content="Workstation 2025"><meta name=twitter:description content="It’s been almost 2 years since my last workstation setup post. At a high level, it hasn’t changed much, but it’s been a while, so I figured it’s a good time to share some updates."><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&family=Nanum+Gothic:wght@400;700;800&display=swap" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=/css/normalize.css><link rel=stylesheet type=text/css media=screen href=/css/main.css><script src=/js/feather.min.js></script><script src=/js/main.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-8LL0B59QRS"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8LL0B59QRS")}</script></head><body><div class="container wrapper post"><div class=header><base href=/><h1 class=site-title><a href=/>namnd ☕</a></h1><div class=site-description><h2>personal blog</h2><nav class="nav social"><ul class=flat><a href=https://github.com/namnd title=Github><i data-feather=github></i></a><a href=https://twitter.com/namnd_ title=Twitter><i data-feather=twitter></i></a><a href=/index.xml title=RSS><i data-feather=rss></i></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/about>About</a></li></ul></nav></div><div class=post-header><h1 class=title>Workstation 2025</h1><div class=post-tags><nav class="nav tags"><ul class=flat><li><a href=/tags/nix>nix</a></li><li><a href=/tags/nixos>nixos</a></li><li><a href=/tags/vm>vm</a></li><li><a href=/tags/utm>utm</a></li><li><a href=/tags/ghostty>ghostty</a></li><li><a href=/tags/lemonade>lemonade</a></li><li><a href=/tags/gpg>gpg</a></li><li><a href=/tags/pass>pass</a></li><li><a href=/tags/maccy>maccy</a></li><li><a href=/tags/hammerspoon>hammerspoon</a></li><li><a href=/tags/zen-browser>zen-browser</a></li></ul></nav></div><div class=meta>Posted at &mdash; Jan 1, 2025
&#183; 3 min read</div></div><div class=markdown><p>It&rsquo;s been almost 2 years since my last workstation <a href=https://namnd.com/posts/nixos-and-virtual-machine/>setup post</a>. At a high level, it hasn&rsquo;t changed much, but it&rsquo;s been a while, so I figured it&rsquo;s a good time to share some updates.</p><h2 id=host---macos>Host - MacOS</h2><p>Not much has changed on my Macbook setup.</p><ul><li><a href=https://www.passwordstore.org/>pass</a> - password management tool. I also use a private git repo to sync with my iPhone. One of the best tool I&rsquo;ve used and would highly recommend over any password manager SaaS.</li><li><a href=https://maccy.app/>Maccy</a> - open source clipboard manager that supports fuzzy search. I also have a <a href=https://github.com/namnd/home/blob/main/home-manager/zshrc#L99-L104>wrapper</a> to ignore any password being copied. To be honest, I don&rsquo;t know if I can ever live without it.</li><li><a href=https://github.com/lemonade-command/lemonade>lemonade</a> - to sync system clipboards between the host and the virtual machine.</li><li><a href=https://www.hammerspoon.org>Hammerspoon</a> - for keyboard shortcuts & window tiling</li><li><del>qutebrowser</del> <a href=https://zen-browser.app/>Zen</a> - a lightweight Firefox based browser, something I tried recently and quite like it. However, I will use Chrome for work because of the Google Meets experience.</li><li><del>kitty</del> <a href=https://ghostty.org/>Ghostty</a> - a new terminal emulator written in Zig</li><li>and last but not least <a href=https://mac.getutm.app/>UTM</a>. It&rsquo;s super easy and effortless to create a new NixOS VM</li></ul><blockquote><p>Before jumping in to the NixOS VM, I want to point out a very important thing, that is I use <strong>Nix</strong> (with <a href=https://github.com/nix-community/home-manager><em>Home manager</em></a> on top) as the package manager for both MacOS and NixOS. This allows me to have a consistent user environment across both systems. Tools like <code>git</code>, <code>zsh</code>, <code>gpg</code>, and many other cli tools I can set up once and use everywhere.</p></blockquote><h2 id=virtual-machine---nixos>Virtual machine - NixOS</h2><p>I have tried a few different setups, like using VirtualBox or VMware Fusion with NixOS + i3. Maybe I did something wrong, or didn&rsquo;t spend enough time to work out the <code>spice-vdagent</code> issue, or the HiDPI config on NixOS, so I always end up going back to UTM + NixOS (via SSH) setup. This setup has worked really well for me last 2 years, so maybe there is less motivation for me to try something new.</p><p>Clone this <a href=https://github.com/namnd/home>repo</a> if you want to try it yourselve.</p><p>Step 1-3 is simply install a minimal NixOS (no desktop environment) in which <code>root</code> user has password as <code>root</code>. The result of these steps is this <a href=https://archive.org/download/nixos-24.11-arm64.utm/nixos-24.11-arm64.utm.zip>NixOS UTM template</a> that I&rsquo;ve created and used myself. You can download and use it directly, or follow the steps below to create your own.</p><ol><li><p>Use UTM to create a new VM with the following settings:</p><ul><li>Custom: Virtualize</li><li>Preconfigured: Linux</li><li>Boot ISO Image: download minimal ISO image from <a href=https://channels.nixos.org/nixos-24.11/latest-nixos-minimal-aarch64-linux.iso>NixOS</a></li><li>Memory: <code>10240</code> (on 16GB host)</li><li>CPU: <code>8</code> (on 10-core host)</li><li>Disk: <code>100GB</code></li><li>Name: <code>NixOS</code></li><li>Network: <code>Emulated VLAN</code> with Port Forwarding on port 22</li></ul></li><li><p>Start the VM and set root password as <code>root</code></p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ sudo -i
</span></span><span style=display:flex><span>$ passwd
</span></span></code></pre></div><ol start=3><li>From this repo root directory, run command to install NixOS</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ make install
</span></span></code></pre></div><p>Once finish installing, shutdown the VM, remove bootable ISO, then start the VM again.</p><blockquote><p>Before continuing step 4, make sure to check out the <code>Makefile</code> and <code>./vm/bootstrap.nix</code> and make necessary changes to your custom details. This step will create new OS user, copy secrets (GPG keys), config Tailscale, install home-manager, neovim, etc. Most of them are optional, so you can remove what you don&rsquo;t need.</p></blockquote><ol start=4><li>Run command to bootstrap the VM</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ make bootstrap
</span></span></code></pre></div><p>That&rsquo;s it. It&rsquo;s all good to go. You can now SSH into the VM and start using it.</p></div><hr style=border-color:#f4f4f4><script src=https://giscus.app/client.js data-repo=namnd/namnd.github.io data-repo-id=R_kgDOIuwbYQ data-category="Blog comments" data-category-id=DIC_kwDOIuwbYc4CTmoW data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading=lazy crossorigin=anonymous async></script></div><div class="footer wrapper"><nav class=nav><div>© Copyright namnd.com | <a href=https://github.com/vividvilla/ezhil>Ezhil theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>